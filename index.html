<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Termsql by tobimensch</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Termsql</h1>
        <p class="header">Convert text from a file or from stdin into SQL table and query it instantly. Uses sqlite as backend. The idea is to make SQL into a tool on the command line or in scripts.</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/tobimensch/termsql/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/tobimensch/termsql/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/tobimensch/termsql">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/tobimensch">tobimensch</a></p>


      </header>
      <section>
        <p></p>Manpage of TERMSQL


<h1>
<a id="termsql" class="anchor" href="#termsql" aria-hidden="true"><span class="octicon octicon-link"></span></a>TERMSQL</h1>

<p>Section: User Commands (1)<br>Updated: November 2014<br><a href="#index">Index</a>
<a href="/man/man2html">Return to Main Contents</a></p><hr>

<p><a name="lbAB"> </a></p>

<h2>
<a id="name" class="anchor" href="#name" aria-hidden="true"><span class="octicon octicon-link"></span></a>NAME</h2>

<p>termsql - manual page for termsql 0.3alpha
<a name="lbAC"> </a></p>

<h2>
<a id="description" class="anchor" href="#description" aria-hidden="true"><span class="octicon octicon-link"></span></a>DESCRIPTION</h2>

<p>usage: termsql [-h] [-1] [-d [DELIMITER]] [-p [SEPARATOR]]</p>

<dl compact>
<dt></dt>
<dd>
[-l [LINE_AS_COLUMN]] [-k [KEY_COLUMNS]] [-c [COLUMNS]] [-w]
[-H [OFFSET_HEAD]] [-T [OFFSET_TAIL]] [-M [MAX_ROWS]] [-C] [-D]
[-m [MODE]] [-r [MERGE]] [-x] [-a] [-i [INFILE]] [-o [OUTFILE]]
[-q [QUERYFILE]] [-t [TABLE]] [-s [SQLITE]] [-v]
[query]
</dd>
</dl>

<p></p><p></p>

<p>Convert text into SQL table and query it
<a name="lbAD"> </a></p>

<h3>
<a id="positional-arguments" class="anchor" href="#positional-arguments" aria-hidden="true"><span class="octicon octicon-link"></span></a>positional arguments:</h3>

<dl compact>
<dt>query</dt>
<dd>
SQL Query string
</dd>
</dl>

<p><a name="lbAE"> </a></p>

<h3>
<a id="optional-arguments" class="anchor" href="#optional-arguments" aria-hidden="true"><span class="octicon octicon-link"></span></a>optional arguments:</h3>

<dl compact>
<dt>
<b>-h</b>, <b>--help</b>
</dt>
<dd>
show this help message and exit
</dd>
<dt>
<b>-1</b>, <b>--head</b>
</dt>
<dd>
use first line/head(er) for column names
</dd>
<dt>
<b>-d</b> [DELIMITER], <b>--delimiter</b> [DELIMITER]</dt>
<dd>
custom delimiter (default is whitespace)
</dd>
<dt>
<b>-p</b> [SEPARATOR], <b>--separator</b> [SEPARATOR]</dt>
<dd>
set sqlite output field separator (default depends on
output mode. ie. for list '|' is the default and for
csv ',' is the default)
</dd>
<dt>
<b>-l</b> [LINE_AS_COLUMN], <b>--line-as-column</b> [LINE_AS_COLUMN]</dt>
<dd>
each line of input is a whole column, next row begins
after n lines
</dd>
<dt>
<b>-k</b> [KEY_COLUMNS], <b>--key-columns</b> [KEY_COLUMNS]</dt>
<dd>
one or more columns can make up the primary key (i.e
<b>-k</b> COL0 or <b>-c</b> one,two,three <b>-k</b> one,two)
</dd>
<dt>
<b>-c</b> [COLUMNS], <b>--columns</b> [COLUMNS]</dt>
<dd>
set custom column names (ie. <b>-c</b> 'name,street,age')
</dd>
<dt>
<b>-w</b>, <b>--whitespace</b>
</dt>
<dd>
use whitespace as field separator (default is |).
equal to mode column
</dd>
<dt>
<b>-H</b> [OFFSET_HEAD], <b>--offset-head</b> [OFFSET_HEAD]</dt>
<dd>
ignore first n lines of input
</dd>
<dt>
<b>-T</b> [OFFSET_TAIL], <b>--offset-tail</b> [OFFSET_TAIL]</dt>
<dd>
ignore last n lines of input
</dd>
<dt>
<b>-M</b> [MAX_ROWS], <b>--max-rows</b> [MAX_ROWS]</dt>
<dd>
don't insert more than n rows into database
</dd>
<dt>
<b>-C</b>, <b>--dump-create-table</b>
</dt>
<dd>
dump create table SQL
</dd>
<dt>
<b>-D</b>, <b>--dump</b>
</dt>
<dd>
dump complete SQL to create table and content
</dd>
<dt>
<b>-m</b> [MODE], <b>--mode</b> [MODE]</dt>
<dd>
set sqlite output mode i.e.: csv, column, html,
insert, line, list, tabs, tcl (default is list)
</dd>
<dt>
<b>-r</b> [MERGE], <b>--merge</b> [MERGE]</dt>
<dd>
merges all columns from column n to the last one into
one. This is useful when you have data like filenames
with whitespaces in it, to prevent it from getting
split by the delimiter. Note that counting starts from
0, therefore n=0 is the first column ...
</dd>
<dt>
<b>-x</b>, <b>--select-all</b>
</dt>
<dd>
add final SELECT * FROM to user defined query
</dd>
<dt>
<b>-a</b>, <b>--append</b>
</dt>
<dd>
don't DROP TABLE instead just append data to existing
table. If the existing table doesn't have enough
columns it will be ALTERed accordingly, if possible
</dd>
<dt>
<b>-i</b> [INFILE], <b>--infile</b> [INFILE]</dt>
<dd>
use file as input instead of stdin
</dd>
<dt>
<b>-o</b> [OUTFILE], <b>--outfile</b> [OUTFILE]</dt>
<dd>
location/filename to use for sql database (by default
a tempfile is used)
</dd>
<dt>
<b>-q</b> [QUERYFILE], <b>--queryfile</b> [QUERYFILE]</dt>
<dd>
load complex query from file, queries on the
commandline get executed last
</dd>
<dt>
<b>-t</b> [TABLE], <b>--table</b> [TABLE]</dt>
<dd>
tablename (must be a valid sqlite tablename)
</dd>
<dt>
<b>-s</b> [SQLITE], <b>--sqlite</b> [SQLITE]</dt>
<dd>
path to sqlite executable
</dd>
<dt>
<b>-v</b>, <b>--version</b>
</dt>
<dd>
display version information
</dd>
</dl>

<p><a name="lbAF"> </a></p>

<h3>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>examples:</h3>

<dl compact>
<dt>
<b>--</b> ps aux | termsql "select * from tbl where COL0='root' limit 5"
<dt></dt>
</dt>
<dd>
<tt>&gt; outputs 5 processes that are running as root</tt>
</dd>
<dt>
<b>--</b> df | termsql <b>-1</b> 'select Filesystem from tbl order by [1K-blocks] desc limit 1'
<dt></dt>
</dt>
<dd>
<tt>&gt; returns the largest device</tt>
</dd>
<dt>
<b>--</b> cat <i>/proc/cpuinfo</i> | termsql "select COL2 from tbl where COL0='bogomips'"
<dt></dt>
</dt>
<dd>
<tt>&gt; how many bogomips does your system have?</tt>
</dd>
<dt>
<b>--</b> termsql <b>--infile</b> <i>/etc/group</i> <b>-d</b> ':' "select COL0 from tbl"
<dt></dt>
</dt>
<dd>
<tt>&gt; read from file, use : as delimiter, shows all groups in /etc/group</tt>
</dd>
<dt>
<b>--</b> termsql <b>-i</b> MyCSVFile.CSV <b>-t</b> fancytable <b>-d</b> ',' <b>-1</b> <b>-o</b> mysqlite.db
<dt></dt>
</dt>
<dd>
<tt>&gt; creates a new sqlite database from a CSV file. -d ',' tells termsql to use commata as delimiter. -1 tells termsql that the first line of the CSV file is not data and instead the column names and termsql creates database columns with those names accordingly. -t fancytable sets the tablename to fancytable</tt>
</dd>
<dt>
<b>--</b> sensors | termsql "select COL2 from tbl where COL0='Core'"
<dt></dt>
</dt>
<dd>
<tt>&gt; extract the temperature from all your CPU cores</tt>
</dd>
<dt>
<b>--</b> export LC_ALL=en_US; top <b>-b</b> | head | termsql <b>-1</b> <b>-H</b> 6 "select [PID],[USER],[COMMAND],[%CPU] from tbl where [%CPU]&gt;=25"
<dt></dt>
</dt>
<dd>
<tt>&gt; termsql doesn't recognize numbers like "25,3" as numbers, but as strings. export LC_ALL=en_US ensures that top outputs numbers that are easy for termsql/sqlite to digest (ie. "25.3"). -H 6 makes termsql disregard the first 6 lines. We select only the processes with more than 25% cpu usage and output their PID,USER,COMMAND and %CPU.</tt>
</dd>
<dt>
<b>--</b> export DISPLAY=$(ps aux | termsql "select COL11 from tbl where COL10 like '%Xorg.bin%' limit 1")
<dt></dt>
</dt>
<dd>
<tt>&gt; set DISPLAY environment variable to what display X is running on right now, assuming that the X binary is called "Xorg.bin")</tt>
</dd>
<dt>
<b>--</b> ls <b>-lha</b> /usr/bin/* | termsql <b>-w</b> <b>-r</b> 8 "select * from tbl order by COL8 desc"
<dt></dt>
</dt>
<dd>
<tt>&gt; -r 8 merges the filenames into the 8th column. Then "order by COL8 desc" sorts them in reverse order. Due to -w the output looks nice on the command line</tt>
<p>
</p>
</dd>
</dl>

<hr>

<p><a name="index"> </a></p><h2>
<a id="index" class="anchor" href="#index" aria-hidden="true"><span class="octicon octicon-link"></span></a>Index</h2>

<dl>
<dt><a href="#lbAB">NAME</a></dt>
<dd>
</dd>
<dt><a href="#lbAC">DESCRIPTION</a></dt>
<dd>
<dl>
<dt><a href="#lbAD">positional arguments:</a></dt>
<dd>
</dd>
<dt><a href="#lbAE">optional arguments:</a></dt>
<dd>
</dd>
<dt><a href="#lbAF">examples:</a></dt>
<dd>
</dd>
</dl>

<p></p>
</dd>
</dl>

<hr>

<p>This document was created by
<a href="/man/man2html">man2html</a>,
using the manual pages.<br>
Time: 13:22:48 GMT, November 24, 2014

</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
